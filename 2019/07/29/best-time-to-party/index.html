<!DOCTYPE html>
<html lang="en">
  <head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">

<meta name="theme-color" content="#f8f5ec">
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="description" content="Puzzle 2 - The Best Time To Party"><link rel="alternate" href="/atom.xml" title="DiamondI's blog"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.11.0">
<link rel="canonical" href="http://diamondi.github.io/2019/07/29/best-time-to-party/">

<link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css"><link rel="stylesheet" type="text/css" href="/lib/nprogress/nprogress.min.css"><script type="text/x-mathjax-config">
    MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
  </script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.11.0">

<script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<script>
  window.config = {"leancloud":{"app_id":null,"app_key":null},"toc":true,"fancybox":true,"pjax":true,"latex":true};
</script>

    <title>Puzzle 2 - The Best Time To Party - DiamondI's blog</title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">DiamondI's blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list"><a href="/">
        <li class="mobile-menu-item">Home
          </li>
      </a><a href="/archives/">
        <li class="mobile-menu-item">Archives
          </li>
      </a><a href="/categories">
        <li class="mobile-menu-item">Categories
          </li>
      </a></ul>
</nav>
<div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">DiamondI's blog</a>
</div>

<nav class="site-navbar"><ul id="menu" class="menu"><li class="menu-item">
          <a class="menu-item-link" href="/">
            Home
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            Archives
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/categories">
            Categories
            </a>
        </li>
      </ul></nav>
</header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content"><article class="post">
    <header class="post-header">
      <h1 class="post-title">Puzzle 2 - The Best Time To Party
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-07-29
        </span><span class="post-category">
            <a href="/categories/Misc/">Misc</a>
            </span>
        </div>
    </header>

    <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Programming-for-Puzzled"><span class="toc-text">Programming for Puzzled</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Puzzle-2-The-Best-Time-To-Party"><span class="toc-text">Puzzle 2: The Best Time To Party</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Puzzle-Description"><span class="toc-text">Puzzle Description</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Naive-Algorithm"><span class="toc-text">Naive Algorithm</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Improve"><span class="toc-text">Improve</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Exercises"><span class="toc-text">Exercises</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Exercise-1"><span class="toc-text">Exercise 1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Exercise-2"><span class="toc-text">Exercise 2</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Exercise-3"><span class="toc-text">Exercise 3</span></a></li></ol></li></ol></li></ol></li></ol>
    </div>
  </div><div class="post-content"><h1 id="Programming-for-Puzzled"><a href="#Programming-for-Puzzled" class="headerlink" title="Programming for Puzzled"></a>Programming for Puzzled</h1><p>这是MIT的一门公开课，讲师是Prof. Srini Devadas，课程的level是本科生。</p>
<a id="more"></a>
<p><strong>Prof. Srini Devadas</strong></p>
<p><img src="https://www.csail.mit.edu/sites/default/files/styles/headshot/public/images/migration/devadas.jpg?h=5636fc5d&amp;itok=EUGLSbU-" alt="Prof. Srini Devadas"></p>
<h2 id="Puzzle-2-The-Best-Time-To-Party"><a href="#Puzzle-2-The-Best-Time-To-Party" class="headerlink" title="Puzzle 2: The Best Time To Party"></a>Puzzle 2: The Best Time To Party</h2><h3 id="Puzzle-Description"><a href="#Puzzle-Description" class="headerlink" title="Puzzle Description"></a>Puzzle Description</h3><p><a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-s095-programming-for-the-puzzled-january-iap-2018/puzzle-2-the-best-time-to-party/MIT6_S095IAP18_Puzzle_2.pdf" target="_blank" rel="noopener">The Best Time to Party (PDF)</a></p>
<p><strong>问题描述（用自己的话描述）</strong></p>
<p>有一个聚会（party）将要举行，而聚会中有许多的小项目（celebrity）。现在给出了这些小项目的开始时间和结束时间（左闭右开），问何时参加聚会，可以同时看到最多的小项目？</p>
<p>题目假设开始时间和结束时间是以<code>[i, j)</code>，即左闭右开区间的形式出现，表示该小项目是<code>i-th</code>小时开始，<code>j-th</code>小时结束。并且假设参加时间也是整点。</p>
<p><strong>注：</strong> 左闭右开意味着，即便在一个小项目结束的时间点参加进去，也无法看到该项目了。</p>
<p>举例如下：</p>
<table>
<thead>
<tr>
<th>Celebrity</th>
<th>Comes</th>
<th>Goes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Beyoncé</td>
<td>6</td>
<td>7</td>
</tr>
<tr>
<td>Taylor</td>
<td>7</td>
<td>9</td>
</tr>
<tr>
<td>Brad</td>
<td>10</td>
<td>11</td>
</tr>
<tr>
<td>Katy</td>
<td>10</td>
<td>12</td>
</tr>
<tr>
<td>Tom</td>
<td>8</td>
<td>10</td>
</tr>
<tr>
<td>Drake</td>
<td>9</td>
<td>11</td>
</tr>
<tr>
<td>Alicia</td>
<td>6</td>
<td>8 </td>
</tr>
</tbody>
</table>
<h2 id="Naive-Algorithm"><a href="#Naive-Algorithm" class="headerlink" title="Naive Algorithm"></a>Naive Algorithm</h2><p>在课堂上，Devadas提问同学，同学提出了一个非常直觉也非常naive的算法：</p>
<blockquote>
<p>对每个小时都检查一遍，在该小时里同时举行的小项目有多少个，找出最多的那个即可。</p>
</blockquote>
<p>这个算法的正确性显然。效率呢？假设party开始时间是m，结束时间是n，celebrity数量是x，那么复杂度就是<code>O((n - m)x)</code>。若将<code>(n - m)</code>看作是常数，似乎是线性的，而且在时间间隔是小时的时候，将其看作常数确实未尝不可；但若时间间隔是分甚至是秒的时候，<code>(n - m)</code>便无法再简单地看作是常数了，复杂度也就不再是线性的了。</p>
<p>老师给出的示例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Programming for the Puzzled -- Srini Devadas</span></span><br><span class="line"><span class="comment">#yThe Best Time to Party</span></span><br><span class="line"><span class="comment">#Given a list of intervals when celebrities will be at the party</span></span><br><span class="line"><span class="comment">#Output is the time that you want to go the party when the maximum number of</span></span><br><span class="line"><span class="comment">#celebrities are still there.</span></span><br><span class="line"><span class="comment">#Brute force algorithm implemented here</span></span><br><span class="line"></span><br><span class="line">sched = [(<span class="number">6</span>, <span class="number">8</span>), (<span class="number">6</span>, <span class="number">12</span>), (<span class="number">6</span>, <span class="number">7</span>), (<span class="number">7</span>, <span class="number">8</span>), (<span class="number">7</span>, <span class="number">10</span>), (<span class="number">8</span>, <span class="number">9</span>), (<span class="number">8</span>, <span class="number">10</span>), (<span class="number">9</span>, <span class="number">12</span>),</span><br><span class="line">            (<span class="number">9</span>, <span class="number">10</span>), (<span class="number">10</span>, <span class="number">11</span>), (<span class="number">10</span>, <span class="number">12</span>), (<span class="number">11</span>, <span class="number">12</span>)]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bestTimeToParty</span><span class="params">(schedule)</span>:</span></span><br><span class="line">    <span class="comment">#Find start time and end time</span></span><br><span class="line">    start = schedule[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">    end = schedule[<span class="number">0</span>][<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">for</span> c <span class="keyword">in</span> schedule:</span><br><span class="line">        start = min(c[<span class="number">0</span>], start)</span><br><span class="line">        end = max(c[<span class="number">1</span>], end)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#compute count of celebrities at each time</span></span><br><span class="line">    count = celebrityDensity(schedule, start, end)</span><br><span class="line">    </span><br><span class="line"><span class="comment">##    print (count)</span></span><br><span class="line">    maxcount = <span class="number">0</span></span><br><span class="line">    <span class="comment">#Range over times to find the time when the maximum celebrities are around.</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(start, end + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> count[i] &gt; maxcount:</span><br><span class="line">            maxcount = count[i]</span><br><span class="line">            time = i</span><br><span class="line"></span><br><span class="line"><span class="comment">##    maxcount = max(count[start:end + 1])</span></span><br><span class="line"><span class="comment">##    time = count.index(maxcount)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#Output the best time to party.</span></span><br><span class="line">    <span class="comment">#Note that the \ means the statement continues on the next line.</span></span><br><span class="line">    <span class="keyword">print</span> (<span class="string">'Best time to attend the party is at'</span>, time,\</span><br><span class="line">           <span class="string">'o\'clock'</span>, <span class="string">':'</span>, maxcount, <span class="string">'celebrities will be attending!'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">celebrityDensity</span><span class="params">(sched, start, end)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#Initialize a list of length end + 1 to all 0's</span></span><br><span class="line">    count = [<span class="number">0</span>] * (end + <span class="number">1</span>)</span><br><span class="line">    <span class="comment"># i ranges over different times</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(start, end + <span class="number">1</span>):</span><br><span class="line">        count[i] = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> sched:</span><br><span class="line">            <span class="comment">#Check if celebrity c is around at time i</span></span><br><span class="line">            <span class="keyword">if</span> c[<span class="number">0</span>] &lt;= i <span class="keyword">and</span> c[<span class="number">1</span>] &gt; i:</span><br><span class="line">                count[i] += <span class="number">1</span></span><br><span class="line">                </span><br><span class="line">    <span class="keyword">return</span> count</span><br><span class="line">                </span><br><span class="line"></span><br><span class="line">bestTimeToParty(sched)</span><br></pre></td></tr></table></figure>
<p>代码中首先找到了schedule中所有celebrity中最早的开始时间和最晚的结束时间，即确定了遍历的时间范围。然后对每个小时都进行一次检查，最后得到最多项目同时进行的时间。</p>
<h3 id="Improve"><a href="#Improve" class="headerlink" title="Improve"></a>Improve</h3><p>上面的算法依赖时间的粒度，因此一旦时间粒度变得更细了，上面的代码就需要修改。不仅如此，时间粒度变细之后也会使得计算量增加。</p>
<p>Devadas在课上又提出了新的思路：先将每个项目的开始时间和结束时间进行排序，然后对每个时间进行遍历，同时维护一个变量<code>count</code>来记录目前有多少个正在进行的项目。每当有项目开始的时候，就<code>count += 1</code>，而每当有项目结束的时候，就<code>count -= 1</code>。这样就可以找到最多同时有多少个项目在同时进行了。<strong>注意当有项目的开始时间和另一个项目的结束时间相同时，需要先考虑结束时间，这是因为左闭右开的性质。</strong></p>
<p>这样的话，假设小项目数有x个的话，那么时间复杂度由排序的复杂度决定，可以达到<code>O(xlogx)</code>的复杂度，显然比之前的算法要好。不仅如此，这个算法不依赖时间粒度，即便粒度达到了分或秒，都不需要更改大量的代码，只要确保时间仍然能够比较大小即可。</p>
<p>老师的示例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Programming for the Puzzled -- Srini Devadas</span></span><br><span class="line"><span class="comment">#The Best Time to Party</span></span><br><span class="line"><span class="comment">#Given a list of intervals when celebrities will be at the party</span></span><br><span class="line"><span class="comment">#Output is the time that you want to go the party when the maximum number of</span></span><br><span class="line"><span class="comment">#celebrities are still there.</span></span><br><span class="line"><span class="comment">#Clever algorithm that will work with fractional times</span></span><br><span class="line"></span><br><span class="line">sched = [(<span class="number">6</span>, <span class="number">8</span>), (<span class="number">6</span>, <span class="number">12</span>), (<span class="number">6</span>, <span class="number">7</span>), (<span class="number">7</span>, <span class="number">8</span>), (<span class="number">7</span>, <span class="number">10</span>), (<span class="number">8</span>, <span class="number">9</span>), (<span class="number">8</span>, <span class="number">10</span>), (<span class="number">9</span>, <span class="number">12</span>),</span><br><span class="line">            (<span class="number">9</span>, <span class="number">10</span>), (<span class="number">10</span>, <span class="number">11</span>), (<span class="number">10</span>, <span class="number">12</span>), (<span class="number">11</span>, <span class="number">12</span>)]</span><br><span class="line">sched2 = [(<span class="number">6.0</span>, <span class="number">8.0</span>), (<span class="number">6.5</span>, <span class="number">12.0</span>), (<span class="number">6.5</span>, <span class="number">7.0</span>), (<span class="number">7.0</span>, <span class="number">8.0</span>), (<span class="number">7.5</span>, <span class="number">10.0</span>), (<span class="number">8.0</span>, <span class="number">9.0</span>),</span><br><span class="line">          (<span class="number">8.0</span>, <span class="number">10.0</span>), (<span class="number">9.0</span>, <span class="number">12.0</span>), (<span class="number">9.5</span>, <span class="number">10.0</span>), (<span class="number">10.0</span>, <span class="number">11.0</span>), (<span class="number">10.0</span>, <span class="number">12.0</span>), (<span class="number">11.0</span>, <span class="number">12.0</span>)]</span><br><span class="line">sched3 = [(<span class="number">6</span>, <span class="number">7</span>), (<span class="number">7</span>,<span class="number">9</span>), (<span class="number">10</span>, <span class="number">11</span>), (<span class="number">10</span>, <span class="number">12</span>), (<span class="number">8</span>, <span class="number">10</span>), (<span class="number">9</span>, <span class="number">11</span>), (<span class="number">6</span>, <span class="number">8</span>),</span><br><span class="line">          (<span class="number">9</span>, <span class="number">10</span>), (<span class="number">11</span>, <span class="number">12</span>), (<span class="number">11</span>, <span class="number">13</span>), (<span class="number">11</span>, <span class="number">14</span>)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bestTimeToPartySmart</span><span class="params">(schedule)</span>:</span></span><br><span class="line">    <span class="comment">#Convert schedule to list of start times and end times marked as such</span></span><br><span class="line">    times = []</span><br><span class="line">    <span class="keyword">for</span> c <span class="keyword">in</span> schedule:</span><br><span class="line">        times.append((c[<span class="number">0</span>], <span class="string">'start'</span>))</span><br><span class="line">        times.append((c[<span class="number">1</span>], <span class="string">'end'</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">#Sort the list of times.</span></span><br><span class="line">    <span class="comment">#Each time is a start or end time of a celebrity sighting.</span></span><br><span class="line">    sortlist(times)</span><br><span class="line"><span class="comment">##    print times</span></span><br><span class="line"></span><br><span class="line">    maxcount, time = chooseTime(times)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">#Output best time to party</span></span><br><span class="line">    <span class="keyword">print</span> (<span class="string">'Best time to attend the party is at'</span>, time,\</span><br><span class="line">           <span class="string">'o\'clock'</span>, <span class="string">':'</span>, maxcount, <span class="string">'celebrities will be attending!'</span>)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="comment">#Sort the elements of tlist in ascending order</span></span><br><span class="line"><span class="comment">#Sorting is based on the value of the element tuple (both items!)</span></span><br><span class="line"><span class="comment">#The original code had a bug in that it did not look at the second</span></span><br><span class="line"><span class="comment">#item of each tuple and ensure that (x, 'end') of one interval</span></span><br><span class="line"><span class="comment">#is sorted before (x, 'start') of a different tuple.</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sortlist</span><span class="params">(tlist)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> index <span class="keyword">in</span> range(len(tlist)<span class="number">-1</span>):</span><br><span class="line">        ismall = index</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(index, len(tlist)):</span><br><span class="line">            <span class="comment">#Sort based on first item of tuple</span></span><br><span class="line">            <span class="keyword">if</span> tlist[ismall][<span class="number">0</span>] &gt; tlist[i][<span class="number">0</span>] <span class="keyword">or</span> \</span><br><span class="line">               (tlist[ismall][<span class="number">0</span>] == tlist[i][<span class="number">0</span>] <span class="keyword">and</span> \</span><br><span class="line">                tlist[ismall][<span class="number">1</span>] &gt; tlist[i][<span class="number">1</span>]):</span><br><span class="line">                ismall = i</span><br><span class="line">        <span class="comment">#Swap the positions of the elements at index and ismall indices</span></span><br><span class="line">        tlist[index], tlist[ismall] = tlist[ismall], tlist[index]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">chooseTime</span><span class="params">(times)</span>:</span></span><br><span class="line">    </span><br><span class="line">    rcount = <span class="number">0</span></span><br><span class="line">    maxcount = <span class="number">0</span></span><br><span class="line">    time = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#Range through the times computing a running count of celebrities</span></span><br><span class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> times:</span><br><span class="line">        <span class="keyword">if</span> t[<span class="number">1</span>] == <span class="string">'start'</span>:</span><br><span class="line">            rcount = rcount + <span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> t[<span class="number">1</span>] == <span class="string">'end'</span>:</span><br><span class="line">            rcount = rcount - <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> rcount &gt; maxcount:</span><br><span class="line">            maxcount = rcount</span><br><span class="line">            time = t[<span class="number">0</span>]</span><br><span class="line">            </span><br><span class="line">    <span class="keyword">return</span> maxcount, time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">##bestTimeToPartySmart(sched)</span></span><br><span class="line">bestTimeToPartySmart(sched2)</span><br><span class="line">bestTimeToPartySmart (sched3)</span><br></pre></td></tr></table></figure>
<p>奇怪的是，Devadas在这里并没有使用Python内置的sort函数，不仅如此，老师自己实现的sort是选择排序，效率是<code>O(x^2)</code>的。在这样的情况下，该算法与上面的算法孰优孰劣还不一定。但是老师一口咬定这个算法会更快，有点让我感到困惑🤔。</p>
<h3 id="Exercises"><a href="#Exercises" class="headerlink" title="Exercises"></a>Exercises</h3><h4 id="Exercise-1"><a href="#Exercise-1" class="headerlink" title="Exercise 1"></a>Exercise 1</h4><p><strong>Exercise 1:</strong> Suppose you are yourself a busy celebrity and don’t have complete freedom in choosing when you can go to the party. Add arguments to the procedure <strong>bestTimeToPartySmart</strong> and modify it so it determines the maximum number of celebrities you can see within a given time range between <code>ystart</code> and <code>yend</code>. As with celebrities the interval is <code>[ystart, yend)</code>,  so you are available at all times such that <code>ystart &lt;= t &lt; yend</code>.</p>
<p>其实就是问在给定的时间范围内，最多能同时看到几个celebrity。只需要在上面的代码里增加限制条件即可：</p>
<p><strong>老师给出的</strong><code>partysmart-exercise1.py</code><strong>代码</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Programming for the Puzzled -- Srini Devadas</span></span><br><span class="line"><span class="comment">#The Best Time to Party</span></span><br><span class="line"><span class="comment">#Given a list of intervals when celebrities will be at the party</span></span><br><span class="line"><span class="comment">#Output is the time that you want to go the party when the maximum number of</span></span><br><span class="line"><span class="comment">#celebrities are still there.</span></span><br><span class="line"><span class="comment">#Clever algorithm that will work with fractional times</span></span><br><span class="line"></span><br><span class="line">sched = [(<span class="number">6</span>, <span class="number">8</span>), (<span class="number">6</span>, <span class="number">12</span>), (<span class="number">6</span>, <span class="number">7</span>), (<span class="number">7</span>, <span class="number">8</span>), (<span class="number">7</span>, <span class="number">10</span>), (<span class="number">8</span>, <span class="number">9</span>), (<span class="number">8</span>, <span class="number">10</span>), (<span class="number">9</span>, <span class="number">12</span>),</span><br><span class="line">            (<span class="number">9</span>, <span class="number">10</span>), (<span class="number">10</span>, <span class="number">11</span>), (<span class="number">10</span>, <span class="number">12</span>), (<span class="number">11</span>, <span class="number">12</span>)]</span><br><span class="line">sched2 = [(<span class="number">6.0</span>, <span class="number">8.0</span>), (<span class="number">6.5</span>, <span class="number">12.0</span>), (<span class="number">6.5</span>, <span class="number">7.0</span>), (<span class="number">7.0</span>, <span class="number">8.0</span>), (<span class="number">7.5</span>, <span class="number">10.0</span>), (<span class="number">8.0</span>, <span class="number">9.0</span>),</span><br><span class="line">          (<span class="number">8.0</span>, <span class="number">10.0</span>), (<span class="number">9.0</span>, <span class="number">12.0</span>), (<span class="number">9.5</span>, <span class="number">10.0</span>), (<span class="number">10.0</span>, <span class="number">11.0</span>), (<span class="number">10.0</span>, <span class="number">12.0</span>), (<span class="number">11.0</span>, <span class="number">12.0</span>)]</span><br><span class="line">sched3 = [(<span class="number">6</span>, <span class="number">7</span>), (<span class="number">7</span>,<span class="number">9</span>), (<span class="number">10</span>, <span class="number">11</span>), (<span class="number">10</span>, <span class="number">12</span>), (<span class="number">8</span>, <span class="number">10</span>), (<span class="number">9</span>, <span class="number">11</span>), (<span class="number">6</span>, <span class="number">8</span>),</span><br><span class="line">          (<span class="number">9</span>, <span class="number">10</span>), (<span class="number">11</span>, <span class="number">12</span>), (<span class="number">11</span>, <span class="number">13</span>), (<span class="number">11</span>, <span class="number">14</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">#[ystart, yend) is the time that you can meet with the celebrities</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bestTimeToPartySmart</span><span class="params">(schedule, ystart, yend)</span>:</span></span><br><span class="line">    <span class="comment">#Convert schedule to list of start times and end times marked as such</span></span><br><span class="line">    times = []</span><br><span class="line">    <span class="keyword">for</span> c <span class="keyword">in</span> schedule:</span><br><span class="line">        times.append((c[<span class="number">0</span>], <span class="string">'start'</span>))</span><br><span class="line">        times.append((c[<span class="number">1</span>], <span class="string">'end'</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">#Sort the list of times.</span></span><br><span class="line">    <span class="comment">#Each time is a start or end time of a celebrity sighting.</span></span><br><span class="line">    sortlist(times)</span><br><span class="line"><span class="comment">##    print times</span></span><br><span class="line"></span><br><span class="line">    maxcount, time = chooseTimeConstrained(times, ystart, yend)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#Output best time to party</span></span><br><span class="line">    <span class="keyword">print</span> (<span class="string">'Best time to attend the party is at'</span>, time,\</span><br><span class="line">           <span class="string">'o\'clock'</span>, <span class="string">':'</span>, maxcount, <span class="string">'celebrities will be attending!'</span>)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="comment">#Sort the elements of tlist in ascending order</span></span><br><span class="line"><span class="comment">#Sorting is based on the value of the element tuple (both items!)</span></span><br><span class="line"><span class="comment">#The original code had a bug in that it did not look at the second</span></span><br><span class="line"><span class="comment">#item of each tuple and ensure that (x, 'end') of one interval</span></span><br><span class="line"><span class="comment">#is sorted before (x, 'start') of a different tuple.</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sortlist</span><span class="params">(tlist)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> index <span class="keyword">in</span> range(len(tlist)<span class="number">-1</span>):</span><br><span class="line">        ismall = index</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(index, len(tlist)):</span><br><span class="line">            <span class="comment">#Sort based on first item of tuple</span></span><br><span class="line">            <span class="keyword">if</span> tlist[ismall][<span class="number">0</span>] &gt; tlist[i][<span class="number">0</span>] <span class="keyword">or</span> \</span><br><span class="line">               (tlist[ismall][<span class="number">0</span>] == tlist[i][<span class="number">0</span>] <span class="keyword">and</span> \</span><br><span class="line">                tlist[ismall][<span class="number">1</span>] &gt; tlist[i][<span class="number">1</span>]):</span><br><span class="line">                ismall = i</span><br><span class="line">        <span class="comment">#Swap the positions of the elements at index and ismall indices</span></span><br><span class="line">        tlist[index], tlist[ismall] = tlist[ismall], tlist[index]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">chooseTimeConstrained</span><span class="params">(times, ystart, yend)</span>:</span></span><br><span class="line"></span><br><span class="line">    rcount = <span class="number">0</span></span><br><span class="line">    maxcount = <span class="number">0</span></span><br><span class="line">    time = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#Range through the times computing a running count of celebrities</span></span><br><span class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> times:</span><br><span class="line">        <span class="keyword">if</span> t[<span class="number">1</span>] == <span class="string">'start'</span>:</span><br><span class="line">            rcount = rcount + <span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> t[<span class="number">1</span>] == <span class="string">'end'</span>:</span><br><span class="line">            rcount = rcount - <span class="number">1</span></span><br><span class="line">        <span class="comment">#Make sure that you are available during this time t[0]!</span></span><br><span class="line">        <span class="keyword">if</span> rcount &gt; maxcount <span class="keyword">and</span> t[<span class="number">0</span>] &gt;= ystart <span class="keyword">and</span> t[<span class="number">0</span>] &lt; yend:</span><br><span class="line">            maxcount = rcount</span><br><span class="line">            time = t[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> maxcount, time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#bestTimeToPartySmart(sched2, 7.0, 9.0)</span></span><br><span class="line">bestTimeToPartySmart(sched2, <span class="number">10.0</span>, <span class="number">12.0</span>)</span><br></pre></td></tr></table></figure>
<h4 id="Exercise-2"><a href="#Exercise-2" class="headerlink" title="Exercise 2"></a>Exercise 2</h4><p><strong>Exercise 2:</strong> There is an alternative way of computing the best time to party that does not depend on the granularity of time. We choose each celebrity interval in turn, and determine how many other celebrity intervals contain the chosen celebrity’s start time. We pick the time to attend the party to be the start time of the celebrity whose start time is contained in the maximum number of other celebrity intervals. Code this algorithm and verify that it produces the same answer as the algorithm based on sorting.</p>
<p>这个练习提出了一个新的思路：检查每个celebrity的开始时间，找出哪一个celebrity的开始时间被最多的celebrity的时间间隔所包含，这就是所求的答案。</p>
<p>为什么这个思路是正确的呢？原因很简单，在基于排序的算法中，维护的最大数量只有在一个新的celebrity开始的时候才有可能会更新。所以题目所求的时间必然是某个celebrity的开始时间。</p>
<p>code就懒得写了😂，反正也不难。</p>
<h4 id="Exercise-3"><a href="#Exercise-3" class="headerlink" title="Exercise 3"></a>Exercise 3</h4><p><strong>Puzzle Exercise 3:</strong> Imagine that there is a weight associated with each celebrity dependent on how much you like that particular celebrity. This can be represented in the schedule as a 3-tuple, e.g., <code>(6.0, 8.0, 3)</code>. The start time is 6.0, end time is 8.0 and the weight is 3. Modify the code so you find the time that the celebrities with maximum total weight are available. For example, given:</p>
<p><img src="http://ww3.sinaimg.cn/large/006tNc79gy1g5dbixezi7j30fa0920tc.jpg" alt="Example"></p>
<p>We want to return the time corresponding to the right dotted line even though there are only two celebrities available at that time. This is because the weight associated with those two celebrities is 4, which is greater than the total weight of 3 associated with the three celebrities available during the first dotted line.</p>
<p>Here’s a more complex example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sched3 = [(6.0, 8.0, 2), (6.5, 12.0, 1), (6.5, 7.0, 2), (7.0, 8.0, 2), (7.5, 10.0, 3), (8.0, 9.0, 2),(8.0, 10.0, 1), (9.0, 12.0, 2), (9.5, 10.0, 4), (10.0, 11.0, 2), (10.0, 12.0, 3), (11.0, 12.0, 7)]</span><br></pre></td></tr></table></figure>
<p>For this schedule of celebrities, you want to attend at 11.0 o’clock where the weight of attending celebrities is 13 and maximum!</p>
<p>我的思路仍然是先将每个项目的开始时间和结束时间进行排序，同时记录下该项目的权重，然后有项目开始就增加相应的权重，结束就减少相应的权重。</p>
<p>代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> profile</span><br><span class="line"></span><br><span class="line">sched3 = [</span><br><span class="line">            (<span class="number">6.0</span>, <span class="number">8.0</span>, <span class="number">2</span>), (<span class="number">6.5</span>, <span class="number">12.0</span>, <span class="number">1</span>),</span><br><span class="line">            (<span class="number">6.5</span>, <span class="number">7.0</span>, <span class="number">2</span>), (<span class="number">7.0</span>, <span class="number">8.0</span>, <span class="number">2</span>),</span><br><span class="line">            (<span class="number">7.5</span>, <span class="number">10.0</span>, <span class="number">3</span>), (<span class="number">8.0</span>, <span class="number">9.0</span>, <span class="number">2</span>),</span><br><span class="line">            (<span class="number">8.0</span>, <span class="number">10.0</span>, <span class="number">1</span>), (<span class="number">9.0</span>, <span class="number">12.0</span>, <span class="number">2</span>),</span><br><span class="line">            (<span class="number">9.5</span>, <span class="number">10.0</span>, <span class="number">4</span>), (<span class="number">10.0</span>, <span class="number">11.0</span>, <span class="number">2</span>),</span><br><span class="line">            (<span class="number">10.0</span>, <span class="number">12.0</span>, <span class="number">3</span>), (<span class="number">11.0</span>, <span class="number">12.0</span>, <span class="number">7</span>)</span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sortlist</span><span class="params">(times)</span>:</span></span><br><span class="line">    times.sort(key=<span class="keyword">lambda</span> x: (x[<span class="number">0</span>], x[<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bestTimeToParty</span><span class="params">(shed)</span>:</span></span><br><span class="line">    times = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> shed:</span><br><span class="line">        times += [(i[<span class="number">0</span>], <span class="string">'start'</span>, i[<span class="number">-1</span>])]</span><br><span class="line">        times += [(i[<span class="number">1</span>], <span class="string">'end'</span>, i[<span class="number">-1</span>])]</span><br><span class="line"></span><br><span class="line">    sortlist(times)</span><br><span class="line"></span><br><span class="line">    count, maxcount = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> times:</span><br><span class="line">        <span class="keyword">if</span> i[<span class="number">1</span>] == <span class="string">'start'</span>:</span><br><span class="line">            count += i[<span class="number">-1</span>]</span><br><span class="line">            <span class="keyword">if</span> count &gt; maxcount:</span><br><span class="line">                maxcount = count</span><br><span class="line">                time = i[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            count -= i[<span class="number">-1</span>]</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">'Best time to attend the party is at'</span>, time,\</span><br><span class="line">           <span class="string">'o\'clock'</span>, <span class="string">':'</span>, maxcount, <span class="string">'values in total!'</span>)</span><br><span class="line"></span><br><span class="line">profile.run(<span class="string">'bestTimeToParty(sched3)'</span>)</span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Best time to attend the party is at 11.0 o&apos;clock : 13 values in total!</span><br><span class="line">         32 function calls in 0.013 seconds</span><br><span class="line"></span><br><span class="line">   Ordered by: standard name</span><br><span class="line"></span><br><span class="line">   ncalls  tottime  percall  cumtime  percall filename:lineno(function)</span><br><span class="line">        1    0.000    0.000    0.000    0.000 :0(exec)</span><br><span class="line">        1    0.000    0.000    0.000    0.000 :0(print)</span><br><span class="line">        1    0.012    0.012    0.012    0.012 :0(setprofile)</span><br><span class="line">        1    0.000    0.000    0.000    0.000 :0(sort)</span><br><span class="line">        1    0.000    0.000    0.000    0.000 &lt;string&gt;:1(&lt;module&gt;)</span><br><span class="line">        1    0.000    0.000    0.000    0.000 ex3.py:12(sortlist)</span><br><span class="line">       24    0.000    0.000    0.000    0.000 ex3.py:13(&lt;lambda&gt;)</span><br><span class="line">        1    0.000    0.000    0.000    0.000 ex3.py:15(bestTimeToParty)</span><br><span class="line">        1    0.000    0.000    0.013    0.013 profile:0(bestTimeToParty(sched3))</span><br><span class="line">        0    0.000             0.000          profile:0(profiler)</span><br></pre></td></tr></table></figure>

      </div>
      <div class="post-copyright">
    <p class="copyright-item">
      <span>Author: </span>
      <a href="http://diamondi.github.io">DiamondI</a>
    </p>
    <p class="copyright-item">
      <span>Link: </span>
      <a href="http://diamondi.github.io/2019/07/29/best-time-to-party/">http://diamondi.github.io/2019/07/29/best-time-to-party/</a>
    </p>
    <p class="copyright-item">
      <span>License: </span><a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>
    </p>
  </div>
      <footer class="post-footer">
        
        <nav class="post-nav"><a class="prev" href="/2019/09/11/1187/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">1187. Make Array Strictly Increasing</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    <a class="next" href="/2019/07/26/you-will-all-confirm/">
        <span class="next-text nav-default">Puzzle 1 - You Will All Confirm</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    </nav></footer>
    </article></div><div class="comments" id="comments"><div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div></div>
      </main>

      <footer id="footer" class="footer"><div class="social-links"><a href="https://github.com/DiamondI" class="iconfont icon-github" title="github"></a>
        </div><div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">&copy;2015 - 2019<span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">DiamondI</span>
  </span>
</div>
</footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div><script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://diamondi.github.io/2019/07/29/best-time-to-party/';
        this.page.identifier = '2019/07/29/best-time-to-party/';
        this.page.title = 'Puzzle 2 - The Best Time To Party';
    };
    (function() {
    var d = document, s = d.createElement('script');

    s.src = '//https-diamondi-github-io.disqus.com/embed.js';

    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();  
  </script><script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/lib/pjax/jquery.pjax.min.js"></script>
  <script type="text/javascript" src="/lib/nprogress/nprogress.min.js"></script>
  <script type="text/javascript" src="/js/src/even.js?v=2.11.0"></script>
</body>
</html>
